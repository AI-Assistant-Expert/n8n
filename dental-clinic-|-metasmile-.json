{
  "createdAt": "2025-04-14T15:17:54.254Z",
  "updatedAt": "2025-04-24T11:25:25.000Z",
  "id": "GUEtN0cEh5dleATl",
  "name": "Dental Clinic | Metasmile",
  "active": true,
  "nodes": [
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4o-mini"
        },
        "options": {}
      },
      "id": "8726472a-338d-46e1-a1c4-1b86c3f6a197",
      "name": "OpenAI Chat Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "position": [
        -100,
        380
      ],
      "typeVersion": 1.2,
      "credentials": {
        "openAiApi": {
          "id": "VQW5a5RxoMGI5sua",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "content": "**AI Agent üëá**\nThe Prompt is already there, You just need to setup the prompt user message with your text message.",
        "height": 141,
        "width": 194,
        "color": 7
      },
      "id": "786dfa60-5696-4042-b964-bf9d5571b85f",
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        0,
        0
      ],
      "typeVersion": 1
    },
    {
      "parameters": {
        "content": "**Chat Model ‚òùÔ∏è**\nAdd your Open Ai API Key ",
        "height": 80,
        "width": 150,
        "color": 7
      },
      "id": "39932d96-ebd6-4efa-89ae-d1dbecb5682a",
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -140,
        520
      ],
      "typeVersion": 1
    },
    {
      "parameters": {
        "content": "**Gpoogle Calendar ‚òùÔ∏è**\nConnect to Google Calendar",
        "height": 80,
        "width": 190,
        "color": 7
      },
      "id": "a19078e1-06fb-41b4-be6e-099664b21c98",
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        220,
        520
      ],
      "typeVersion": 1
    },
    {
      "parameters": {
        "content": "**Google Sheets ‚òùÔ∏è**\nConnect to Google Sheets",
        "height": 80,
        "width": 190,
        "color": 7
      },
      "id": "b39f7cc9-c370-4d8e-a087-bc4a38da912e",
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        480,
        520
      ],
      "typeVersion": 1
    },
    {
      "parameters": {
        "resource": "calendar",
        "calendar": {
          "__rl": true,
          "value": "metasmile@outlook.com",
          "mode": "list",
          "cachedResultName": "metasmile@outlook.com"
        },
        "timeMin": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Start_Time', ``, 'string') }}",
        "timeMax": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('End_Time', ``, 'string') }}",
        "options": {}
      },
      "id": "7cf443da-78ab-4a39-a33e-1fef7f8436cb",
      "name": "Check Availability",
      "type": "n8n-nodes-base.googleCalendarTool",
      "position": [
        180,
        380
      ],
      "typeVersion": 1.3,
      "credentials": {
        "googleCalendarOAuth2Api": {
          "id": "VOZZ5vJAU8kHP1sO",
          "name": "Google Calendar account"
        }
      }
    },
    {
      "parameters": {
        "calendar": {
          "__rl": true,
          "value": "metasmile@outlook.com",
          "mode": "list",
          "cachedResultName": "metasmile@outlook.com"
        },
        "start": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Start', `Use Central European Summer Time timezone`, 'string') }}",
        "end": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('End', `Use Central European Summer Time timezone and from the service duration calculation`, 'string') }}",
        "additionalFields": {
          "description": "={{ $fromAI(\"Purpose_of_Booking\",\"The purpose of the call, the formatted response should be [The Purpose of the visit is: Purpose_of_Booking]\") }}",
          "summary": "={{ $fromAI(\"Purpose\",\"The purpose of the call, the formatted response should be [Purpose]\") }} - {{ $fromAI(\"name\",\"The name of the person making the booking\") }}"
        }
      },
      "id": "92038c9a-f5a3-443e-bafb-54742834d7a9",
      "name": "Creat event",
      "type": "n8n-nodes-base.googleCalendarTool",
      "position": [
        340,
        380
      ],
      "typeVersion": 1.3,
      "credentials": {
        "googleCalendarOAuth2Api": {
          "id": "VOZZ5vJAU8kHP1sO",
          "name": "Google Calendar account"
        }
      }
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "a25b21c0-4dc1-4862-ba50-926427fc29da",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [
        -320,
        180
      ],
      "id": "5414ddcf-e56b-49dc-93ab-e0eff856b38a",
      "name": "Webhook",
      "webhookId": "a25b21c0-4dc1-4862-ba50-926427fc29da"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1,
      "position": [
        420,
        100
      ],
      "id": "ca45e8ca-2d83-47b8-8205-4c859573d74d",
      "name": "Respond to Webhook"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=User Request: {{ $json.query.request }}\n\nUser Name: {{ $json.body.user_name }}\n\nBooking Service: {{ $json.body.booking_service }}\n\nService Duration: {{ $json.body.service_time }}\n\nTimezone is Central European Summer Time.",
        "options": {
          "systemMessage": "=The current date is: {{ new Date().toLocaleString(\"en-US\", { timeZone: \"Europe/Lisbon\" }) }} Central European Summer Time .\n\nCheck if the date that the user wanted is available in the Availability Tool. If its available then it will return available as true or false.\n\nFor example, the message to extract could look similar to \"Just to confirm, you would to make a tomorrow at 6 PM under the name Ali for Dinner. That correct?\"\n\nMake sure that you take the latest message response for the confirmed booking, if there are multiple confirmations of bookings in the message, choose the latest one.\n\nIf there is already a booking at the users wanted booking time and date, return with only the output \"Unavailable\". If there are currently no bookings at the time, return with only the output \"Available\"\n\nUse \"Create event\" to book the appointment when the slot is available.\n\nUse the service duration for setting the end time of the event."
        }
      },
      "id": "e3b1acb9-4468-4283-b7bf-a87bcf7c07c4",
      "name": "AI Agent",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "position": [
        -40,
        160
      ],
      "typeVersion": 1.7
    }
  ],
  "connections": {
    "Creat event": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Check Availability": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Webhook": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent": {
      "main": [
        [
          {
            "node": "Respond to Webhook",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "pinData": {},
  "versionId": "5fec76b6-de9b-4f2f-9339-3c89122a0740",
  "triggerCount": 1,
  "tags": []
}